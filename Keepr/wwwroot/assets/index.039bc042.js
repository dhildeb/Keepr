import{r as e,c as t,o as a,a as o,b as s,F as l,d as n,S as i,C as c,p as r,e as d,u,$ as p,w as m,f as v,g,h as b,v as f,i as k,j as h,k as y,t as w,l as x,m as _,n as A,q as P,s as V,x as C,y as T,z as K}from"./vendor.822fba46.js";const E=e({user:{},account:{},vaults:[],keeps:[],profile:{},ActiveVault:"",ActiveKeep:""});const S={name:"App",setup:()=>({appState:t((()=>E))})},j={class:"bg-2"},I=s("footer",null,[s("div",{class:"text-center bg-light mt-5 p-3"},[s("em",null,"Created By Daniel Hildebrandt"),s("a",{href:"https://github.com/dhildeb",title:"github page",class:"mdi mdi-github text-dark zoom mx-3 "}),s("a",{href:"https://www.linkedin.com/in/daniel-hildebrandt/",title:"linkedin page",class:"mdi mdi-linkedin text-primary zoom "})])],-1);S.render=function(e,t,i,c,r,d){const u=n("Navbar"),p=n("router-view");return a(),o(l,null,[s("header",null,[s(u)]),s("main",j,[s(p)]),I],64)};class M{static async confirm(e="Are you sure?",t="You won't be able to revert this!",a="warning",o="Yes, delete it!"){try{return!!(await i.fire({title:e,text:t,icon:a,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:o})).isConfirmed}catch(s){return!1}}static toast(e="Warning!",t="warning",a="top-end",o=3e3,s=!0){i.fire({title:e,icon:t,position:a,timer:o,timerProgressBar:s,toast:!0,showConfirmButton:!1})}}const O=window.location.origin.includes("localhost"),D=O?"https://localhost:5001":"",z=c.create({baseURL:D,timeout:8e3});const L=new class{async getAll(){const e=await z.get("api/keeps");E.keeps=e.data}async getById(e){const t=await z.get("api/keeps/"+e);E.ActiveKeep=t.data}async create(e){const t=await z.post("api/keeps",e);E.keeps=[t.data,...E.keeps]}async update(e,t){const a=await z.put("api/keeps/"+e,t);E.ActiveKeep=a.data}async delete(e){try{const t=await z.delete("api/keeps/"+e);M.toast(t.data),E.keeps=E.keeps.filter((t=>t.id!==e))}catch(t){M.toast(t)}}setActive(e){this.getById(e.id),E.ActiveKeep=e}};const R={setup(){const a=u(),o=e({keep:t((()=>E.ActiveKeep)),account:t((()=>E.account))});return{state:o,goToProfile(){var e;p("#keepModal").modal("toggle"),a.push({name:"Profile",params:{id:null==(e=o.keep.creator)?void 0:e.id}})},async deleteKeep(){await M.confirm("Are you sure you want to delete this?")&&L.delete(o.keep.id)},async createKeep(e){p("#createKeepModal").modal("toggle");const t=e.target,a={name:t.name.value,description:t.description.value,tag:t.tag.value,img:t.img.value};L.create(a),t.reset()},close(){p("#createKeepModal").modal("toggle")}}}},B=v("data-v-118b084d");r("data-v-118b084d");const H={class:"modal fade",id:"createKeepModal",tabindex:"-1","aria-labelledby":"createKeepModalLabel","aria-hidden":"true"},U={class:"modal-dialog"},$={class:"modal-content bg-whitish"},W={class:"modal-header justify-content-center"},q=s("h3",null,"Create Keep",-1),N={class:"modal-body d-flex justify-content-between rounded-bottom bg-light p-5"},Y=g('<input id="name" class="rounded text-left input-group-text w-100" type="text" placeholder="Name" data-v-118b084d><input id="description" class="rounded text-left input-group-text w-100 my-3" type="text" placeholder="Description" maxlength="255" data-v-118b084d><input id="tag" class="rounded text-left input-group-text w-100" type="text" placeholder="tag" data-v-118b084d><input id="img" class="rounded text-left input-group-text w-100 my-3" type="url" placeholder="Image Url" data-v-118b084d><button class="btn btn-success" data-v-118b084d> Submit </button>',5);d();const F=B(((e,t,l,n,i,c)=>(a(),o("div",H,[s("div",U,[s("div",$,[s("div",W,[q,s("i",{class:"mdi mdi-close-box text-danger click zoom position-absolute close",title:"Close",onClick:t[1]||(t[1]=(...e)=>n.close&&n.close(...e))})]),s("div",N,[s("form",{class:"form-group w-100",onSubmit:t[2]||(t[2]=m(((...e)=>n.createKeep&&n.createKeep(...e)),["prevent"]))},[Y],32)])])])]))));R.render=F,R.__scopeId="data-v-118b084d";var G=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:R});const J=new class{async getAll(){const e=await z.get("api/vaults");E.vaults=e.data}async getById(e){try{const t=await z.get("api/vaults/"+e);E.ActiveVault=t.data}catch(t){return M.toast("vault is private"),!0}}async create(e){try{const t=await z.post("api/vaults",e);E.vaults=[t.data,...E.vaults]}catch(t){M.toast(t)}}async update(e,t){(await z.put("api/vaults/"+t,e)).data>0&&(E.ActiveVault.name=e.name||E.ActiveVault.name,E.ActiveVault.description=e.description||E.ActiveVault.description)}async delete(e){const t=await z.delete("api/vaults/"+e);E.vaults=E.vaults.filter((t=>t.id!==e)),M.toast(t.data,"success")}};const X={setup:()=>({state:e({account:t((()=>E.account)),isPrivate:!1}),async createVault(e){p("#createVaultModal").modal("toggle");const t=e.target,a={name:t.name.value,description:t.description.value,isPrivate:t.isPrivate.checked};await J.create(a),t.reset()},close(){p("#createVaultModal").modal("toggle")}})},Q=v("data-v-176188c1");r("data-v-176188c1");const Z={class:"modal fade",id:"createVaultModal",tabindex:"-1","aria-labelledby":"createVaultModalLabel","aria-hidden":"true"},ee={class:"modal-dialog"},te={class:"modal-content bg-whitish"},ae={class:"modal-header justify-content-center"},oe=s("h3",null,"Create Vault",-1),se={class:"modal-body bg-light d-flex justify-content-between rounded-bottom p-5"},le=s("input",{id:"name",class:"rounded text-left input-group-text w-100 mb-3",type:"text",placeholder:"Name"},null,-1),ne=s("input",{id:"description",class:"rounded text-left input-group-text w-100 mb-3",type:"text",placeholder:"Description"},null,-1),ie={class:"text-dark"},ce=k(" Private "),re=s("button",{class:"btn btn-success"}," Submit ",-1);d();const de=Q(((e,t,l,n,i,c)=>(a(),o("div",Z,[s("div",ee,[s("div",te,[s("div",ae,[oe,s("i",{class:"mdi mdi-close-box text-danger click zoom position-absolute close",title:"Close",onClick:t[1]||(t[1]=(...e)=>n.close&&n.close(...e))})]),s("div",se,[s("form",{class:"w-100",onSubmit:t[3]||(t[3]=m(((...e)=>n.createVault&&n.createVault(...e)),["prevent"]))},[le,ne,s("p",ie,[ce,b(s("input",{id:"isPrivate",type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=t=>e.checked=t)},null,512),[[f,e.checked]])]),re],32)])])])]))));X.render=de,X.__scopeId="data-v-176188c1";var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:X});const pe=new class{async getKeepsByVaultId(e){try{const t=await z.get(`api/vaults/${e}/keeps`);E.keeps=t.data}catch(t){}}async addToVault(e,t){const a={vaultId:e,keepId:t};await z.post("api/vaultkeeps",a),M.toast("Keep sucessfully added!","success","top-end",1e3)}async delete(e){const t=await z.delete("api/vaultkeeps/"+e),a=E.keeps.findIndex((e=>e.id===t.data.keepId));E.keeps.splice(a,1),M.toast("Successfully Removed","success")}};const me={props:{keep:{type:Object,required:!0}},setup(a){const o=u(),s=h();return{state:e({vault:t((()=>E.ActiveVault)),account:t((()=>E.account))}),route:s,setActive(){L.setActive(a.keep)},async removeKeep(){await M.confirm("Do you really want to remove this from your vault?")&&await pe.delete(a.keep.vaultKeepId)},goThere(){o.push({name:"Profile",params:{id:a.keep.creator.id}})}}}},ve=v("data-v-2bf8a981");r("data-v-2bf8a981");const ge={class:"d-flex justify-content-between align-items-end h-100 w-100 pb-2"},be={class:"name text-light"};d();const fe=ve(((e,t,l,n,i,c)=>{var r,d,u;return a(),o("section",null,[s("div",{class:"keep-img rounded shadow justify-content-between align-items-end",style:{"background-image":"url("+l.keep.img+")"},"data-toggle":"modal","data-target":"#keepModal",onClick:t[3]||(t[3]=(...e)=>n.setActive&&n.setActive(...e))},[n.state.vault.creatorId===n.state.account.id&&(null==(r=n.route.params)?void 0:r.id)>0?(a(),o("i",{key:0,class:"mdi mdi-delete text-danger align-self-start",title:"Remove from Vault",onClick:t[1]||(t[1]=m(((...e)=>n.removeKeep&&n.removeKeep(...e)),["stop"]))})):y("",!0),s("div",ge,[s("span",be,w(l.keep.name),1),s("img",{class:"rounded-circle profile-icon",src:null==(d=l.keep.creator)?void 0:d.picture,alt:"profile img",title:"Go to "+(null==(u=l.keep.creator.name)?void 0:u.split("@")[0])+" profile",onClick:t[2]||(t[2]=m(((...e)=>n.goThere&&n.goThere(...e)),["stop"]))},null,8,["src","title"])])],4)])}));me.render=fe,me.__scopeId="data-v-2bf8a981";var ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:me});const he={setup(){x((()=>{J.getAll()}));const a=u(),o=h(),s=e({keep:t((()=>E.ActiveKeep)),vaults:t((()=>E.vaults.filter((e=>e.creatorId===E.account.id)))),account:t((()=>E.account))});return{state:s,route:o,goToProfile(){var e;p("#keepModal").modal("toggle"),a.push({name:"Profile",params:{id:null==(e=s.keep.creator)?void 0:e.id}})},async deleteKeep(){await M.confirm("Are you sure you want to delete this? it cannot be undone.")&&(p("#keepModal").modal("toggle"),L.delete(s.keep.id))},async addToVault(e){s.keep.keeps++,await pe.addToVault(e,s.keep.id)},close(){p("#keepModal").modal("toggle")}}}},ye=v("data-v-2c5f42dc");r("data-v-2c5f42dc");const we={class:"modal fade",id:"keepModal",tabindex:"-1","aria-labelledby":"keepModalLabel","aria-hidden":"true"},xe={class:"modal-dialog modal-xl"},_e={class:"modal-content"},Ae={class:"modal-header text-center"},Pe={class:"m-auto"},Ve={class:"modal-body"},Ce={class:"container"},Te={class:"row"},Ke={class:"col flex-grow-1"},Ee={class:"row"},Se={class:"p-3"},je={class:"row pb-3"},Ie={key:0,class:"dropdown text-center my-4 align-self-center m-auto pb-3"},Me=s("button",{class:"btn btn-outline-primary dropdown-toggle","data-toggle":"dropdown"}," Add to Vault ",-1),Oe={class:"dropdown-menu set-h"},De={class:"row justify-content-between align-content-end bottom w-100"},ze={class:"text-center align-self-end"},Le={class:"mdi mdi-eye",title:"total views"},Re={class:"mdi mdi-lock px-3",title:"total keeps"},Be={class:"mdi mdi-share",title:"total shares"};d();const He=ye(((e,t,n,i,c,r)=>{var d,u,p,m;return a(),o("div",we,[s("div",xe,[s("div",_e,[s("div",Ae,[s("img",{class:"img-fluid profile-icon rounded-circle click",title:null==(d=i.state.keep.creator)?void 0:d.name,src:null==(u=i.state.keep.creator)?void 0:u.picture,alt:null==(p=i.state.keep.creator)?void 0:p.name,onClick:t[1]||(t[1]=(...e)=>i.goToProfile&&i.goToProfile(...e))},null,8,["title","src","alt"]),s("h4",Pe,w(i.state.keep.name),1),s("i",{class:"mdi mdi-close-box text-danger click zoom",title:"Close",onClick:t[2]||(t[2]=(...e)=>i.close&&i.close(...e))})]),s("div",Ve,[s("div",Ce,[s("div",Te,[s("img",{class:"col-md-6 col-12 img-fluid img",src:i.state.keep.img,alt:i.state.keep.name},null,8,["src","alt"]),s("div",Ke,[s("div",Ee,[s("p",Se,w(i.state.keep.description),1)]),s("div",je,[(null==(m=i.state.account)?void 0:m.id)?(a(),o("div",Ie,[Me,s("div",Oe,[(a(!0),o(l,null,_(i.state.vaults,(e=>(a(),o("p",{class:"dropdown-item-text click hoverable",key:e.id,onClick:t=>i.addToVault(e.id)},w(e.name),9,["onClick"])))),128))])])):y("",!0)]),s("div",De,[s("div",ze,[s("i",Le,w(i.state.keep.views),1),s("i",Re,w(i.state.keep.keeps),1),s("i",Be,w(i.state.keep.shares),1)]),i.state.keep.creatorId===i.state.account.id?(a(),o("i",{key:0,class:"mdi mdi-delete text-danger click align-self-end zoom",title:"Delete Keep",onClick:t[3]||(t[3]=(...e)=>i.deleteKeep&&i.deleteKeep(...e))})):y("",!0)])])])])])])])])}));he.render=He,he.__scopeId="data-v-2c5f42dc";var Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:he});let $e;const We={},qe=function(e,t){if(!t||0===t.length)return e();if(void 0===$e){const e=document.createElement("link").relList;$e=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in We)return;We[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":$e,t||(o.as="script",o.crossOrigin=""),o.href=e,document.head.appendChild(o),t?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>e()))};function Ne(e){return()=>function(e){switch(e){case"./pages/HomePage.vue":return qe((()=>import("./HomePage.763cb530.js")),["/assets/HomePage.763cb530.js","/assets/HomePage.8757fa6b.css","/assets/vendor.822fba46.js"]);case"./pages/ProfilePage.vue":return qe((()=>import("./ProfilePage.c2d87954.js")),["/assets/ProfilePage.c2d87954.js","/assets/ProfilePage.ee95d3f1.css","/assets/vendor.822fba46.js"]);case"./pages/VaultPage.vue":return qe((()=>import("./VaultPage.978e5481.js")),["/assets/VaultPage.978e5481.js","/assets/VaultPage.9165fc8d.css","/assets/vendor.822fba46.js"]);default:return Promise.reject(new Error("Unknown variable dynamic import: "+e))}}(`./pages/${e}.vue`)}const Ye=[{path:"/",name:"Home",component:Ne("HomePage")},{path:"/vault/:id",name:"Vault",component:Ne("VaultPage"),beforeEnter:V},{path:"/profile/:id",name:"Profile",component:Ne("ProfilePage"),beforeEnter:C}],Fe=A({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:P(),routes:Ye});function Ge(e,t){if(O)console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t);else{switch(e){case"log":case"assert":return}console[e](`[${e}] :: ${(new Date).toLocaleTimeString()} :: `,...t)}}const Je={log(){Ge("log",arguments)},error(){Ge("error",arguments)},warn(){Ge("warn",arguments)},assert(){Ge("assert",arguments)},trace(){Ge("trace",arguments)}};const Xe=new class{async getAccount(){try{const e=await z.get("/account");E.account=e.data}catch(e){Je.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}},Qe=T({domain:"dhild.us.auth0.com",clientId:"58l4DWwD0mqroCiyV32WXJBHi1fdWMjD",audience:"https://codeworks-dummy.com",useRefreshTokens:!0,onRedirectCallback:e=>{Fe.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}});async function Ze(e){if(!Qe.isAuthenticated)return e;const t=1e3*Qe.identity.exp,a=t<Date.now(),o=t<Date.now()+432e5;return a?await Qe.loginWithPopup():o&&(await Qe.getTokenSilently(),z.defaults.headers.authorization=Qe.bearer),e}Qe.on(Qe.AUTH_EVENTS.AUTHENTICATED,(async function(){z.defaults.headers.authorization=Qe.bearer,z.interceptors.request.use(Ze),E.user=Qe.user,await Xe.getAccount()}));const et={setup:()=>({state:e({account:t((()=>E.account)),dropOpen:!1}),user:t((()=>E.user)),async login(){Qe.loginWithPopup()},async logout(){Qe.logout({returnTo:window.location.origin})}})},tt=v("data-v-7b935fd6");r("data-v-7b935fd6");const at={class:"navbar navbar-expand-lg navbar-dark bg-n d-flex justify-content-between"},ot=s("div",{class:"d-flex flex-column align-items-center"},[s("img",{class:"img-fluid logo",src:"https://repository-images.githubusercontent.com/167710157/50aa1580-5af6-11ea-8100-0c12db10ab9f",alt:""})],-1),st=s("h1",{class:"title"}," KEEPR ",-1),lt={class:"navbar-text p-xl"},nt={key:1,class:"dropdown click"},it=s("div",{class:"list-group-item list-group-item-action hoverable bg-n text-light p-hover"}," Profile ",-1);d();const ct=tt(((e,t,l,i,c,r)=>{const d=n("router-link");return a(),o("nav",at,[s(d,{class:"navbar-brand d-flex",title:"Home Page",to:{name:"Home"}},{default:tt((()=>[ot])),_:1}),st,s("span",lt,[i.user.isAuthenticated?(a(),o("div",nt,[s("div",{class:"dropdown-toggle",onClick:t[2]||(t[2]=e=>i.state.dropOpen=!i.state.dropOpen)},[s("img",{src:i.state.account.picture,alt:"user photo",height:"40",class:"rounded"},null,8,["src"])]),s("div",{class:["dropdown-menu p-0 list-group w-100 drop-pos",{show:i.state.dropOpen}],onClick:t[4]||(t[4]=e=>i.state.dropOpen=!1)},[s(d,{to:{name:"Profile",params:{id:i.state.account.id}}},{default:tt((()=>[it])),_:1},8,["to"]),s("div",{class:"list-group-item list-group-item-action hoverable bg-n text-light",onClick:t[3]||(t[3]=(...e)=>i.logout&&i.logout(...e))}," logout ")],2)])):(a(),o("button",{key:0,class:"btn btn-outline-primary text-uppercase",onClick:t[1]||(t[1]=(...e)=>i.login&&i.login(...e))}," Login "))])])}));et.render=ct,et.__scopeId="data-v-7b935fd6";var rt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:et});const dt={props:{vault:{type:Object,required:!0}},setup(){const a=h();return{state:e({account:t((()=>E.account))}),async deleteVault(e){await M.confirm("Do you really want to delete this vault?")&&J.delete(e)},route:a}}},ut=v("data-v-b8230c9a");r("data-v-b8230c9a");const pt={key:0,class:"col-lg-3 col-md-4 col-sm-6 col-12 box mb-4"},mt={key:0,class:"position-absolute private"},vt={class:"border border-dark shadow click rounded vault h-100 w-100 d-flex align-items-center justify-content-center text-center"},gt={class:"p-3"};d();const bt=ut(((e,t,l,i,c,r)=>{const d=n("router-link");return i.route.params.id!=i.state.account.id&&l.vault.isPrivate?y("",!0):(a(),o("div",pt,[l.vault.isPrivate?(a(),o("small",mt,"private")):y("",!0),s("div",vt,[i.route.params.id===i.state.account.id?(a(),o("i",{key:0,class:"mdi mdi-delete text-danger position-absolute delete",title:"Delete Vault",onClick:t[1]||(t[1]=e=>i.deleteVault(l.vault.id))})):y("",!0),s(d,{class:"route",to:{name:"Vault",params:{id:l.vault.id}}},{default:ut((()=>[s("b",gt,w(l.vault.name),1)])),_:1},8,["to"])])]))}));dt.render=bt,dt.__scopeId="data-v-b8230c9a";var ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dt});const kt=K(S);!function(e){const t={"./components/CreateKeepModal.vue":G,"./components/CreateVaultModal.vue":ue,"./components/Keep.vue":ke,"./components/KeepModal.vue":Ue,"./components/Navbar.vue":rt,"./components/Vaults.vue":ft};Object.entries(t).forEach((([t,a])=>{const o=a.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");e.component(o,a.default)}))}(kt),kt.use(Fe).mount("#app");export{E as A,z as a,pe as b,L as k,J as v};
